<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Form</title>
    <link rel="stylesheet" href="/styles/main.css"> <!-- 스타일 적용을 위한 CSS 파일 -->
</head>

<body>
    <!-- 상단 네비게이션 -->
    <div class="nav">
        <button id="myButton" onclick="handleMy()">마이</button>
        <button id="messageButton" onclick="handleMessage()">쪽지</button>
        <button id="logoutButton" onclick="handleLogout()">로그아웃</button>
    </div>

<<<<<<< HEAD
    <!-- 게시판 영역 -->
    <div class="board">
        <h3>게시판</h3>
        <a href="/board">더보기</a>
        <table>
            <thead>
                <tr>
                    <th>제목</th>
                    <th>유저 ID</th>
                    <th>날짜</th>
                </tr>
            </thead>
            <tbody>
                <% boardPosts.forEach(post=> { %>
                    <tr>
                        <td>
                            <%= post.title %>
                        </td>
                        <td>
                            <%= post.user_id %>
                        </td>
                        <td>
                            <%= post.created_at %>
                        </td>
                    </tr>
                    <% }) %>
            </tbody>
        </table>
=======
    <!-- 로그인 사용자 정보 -->
    <div class="user-info">
        <h1>Welcome, <%= user.name %>!</h1>
        <p>Email: <%= user.email %></p>
    </div>

    <!-- 대시보드 콘텐츠 -->
    <div class="dashboard-content">
        <h2>Your Dashboard</h2>
        <!-- 추가 콘텐츠를 여기에 추가 -->
        
>>>>>>> 82dd0fb7a087f0496dcef9a470f138ad15a8c6e4
    </div>

    <!-- 조회수 높은 상품 -->
    <div class="popular-product">
        <h3>조회수 높은 상품</h3>
        <% popularProducts.forEach(product=> { %>
            <div class="product">
                <p>카테고리: <%= product.category_name %>
                </p>
                <p>상품명: <%= product.product_name %>
                </p>
                <p>조회수: <%= product.view_count %>
                </p>
            </div>
            <% }) %>
    </div>

    <!-- 최근 등록된 상품 -->
    <div class="recent-products">
        <h3>방금 등록된 상품</h3>
        <% recentProducts.forEach(product=> { %>
            <div class="product">
                <p>상품명: <%= product.product_name %>
                </p>
                <p>등록일: <%= product.created_at %>
                </p>
            </div>
            <% }) %>
    </div>

    <!-- 최근 거래된 상품 -->
    <div class="recent-transactions">
        <h3>최근 거래된 상품</h3>
        <% recentTransactions.forEach(transaction=> { %>
            <div class="product">
                <p>상품명: <%= transaction.product_name %>
                </p>
                <p>거래일: <%= transaction.transaction_at %>
                </p>
            </div>
            <% }) %>
    </div>


    <script>
        function handleMy() {
            window.location.href = '/mypage';

            // fetch('/auth/check-login') // 로그인 상태 확인 API
            //     .then(res => res.json())
            //     .then(data => {
            //         if (data.isLoggedIn) {
            //             window.location.href = '/mypage'; // 마이 페이지로 이동
            //         } else {
            //             window.location.href = '/login'; // 로그인 페이지로 이동
            //         }
            //     })
            //     .catch(err => console.error(err));
        }

        function handleMessage() {
            window.location.href = '/messages'; // 쪽지 페이지로 이동
        }

        function handleLogout() {
            window.location.href = '/logout'; // 로그아웃 요청
        }
    </script>
</body>

</html>